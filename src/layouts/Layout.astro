---
interface Props {}

const {} = Astro.props;
---

<div class="base-layout">
	<main class="base-layout__main">
		<aside class="sidebar">
			<input type="checkbox" id="nav-toggle" class="sidebar__toggle" aria-hidden="true" />
			<div class="sidebar__header">
				<p class="sidebar__tagline">
					A human and an AI named Claude built this website as an experiment.
				</p>
				<label for="nav-toggle" class="sidebar__menu-btn" aria-label="Toggle menu">
					<span class="sidebar__menu-btn-icon"></span>
				</label>
			</div>
			<p class="sidebar__about">
				I'm a brand and mograph designer who likes to experiment with new mediums.
			</p>
			<hr class="sidebar__divider" />
			<nav class="sidebar__nav" aria-label="Main">
				<a href="/">Home</a>
				<a href="/projects/">Projects</a>
				<a href="/articles/">Articles</a>
			</nav>
			<hr class="sidebar__divider" />
			<div class="sidebar__connect">
				<a href="#">portfolio</a>
				<a href="#">bluesky</a>
			</div>
		</aside>
		<div class="content">
			<div class="content__inner">
				<slot />
			</div>
		</div>
	</main>
	<footer class="footer">
		©2026 Hafsah Mijinyawa
	</footer>
</div>

<style>
	.base-layout {
		height: 100vh;
		min-height: 0;
		width: 100%;
		padding: 0 clamp(24px, 4vw, var(--page-padding));
		display: flex;
		flex-direction: column;
		overflow: hidden;
	}

	.base-layout__main {
		display: flex;
		width: 100%;
		min-width: 0;
		gap: var(--nav-content-gap);
		padding-top: clamp(40px, 6vh, 83px);
		flex: 1;
		min-height: 0;
		/* Fixed app shell: main row fills remaining viewport */
		height: 0;
	}

	/* Sidebar — fluid width, content scales to fit (no scroll, no clip) */
	.sidebar {
		flex: 0 0 30%;
		min-width: 260px;
		max-width: 340px;
		align-self: stretch;
		min-height: 0;
		background: var(--sidebar-bg);
		border-radius: var(--radius-container);
		padding: 20px;
		display: flex;
		flex-direction: column;
		gap: clamp(12px, 2vh, 24px);
		overflow: visible;
	}

	.sidebar__toggle {
		position: absolute;
		opacity: 0;
		pointer-events: none;
	}

	.sidebar__header {
		display: block;
	}

	.sidebar__menu-btn {
		display: none;
	}

	.sidebar__tagline {
		font-family: var(--font-sidebar);
		font-weight: 700;
		font-size: clamp(16px, 2vw, 22px);
		line-height: 1.3;
		color: var(--sidebar-text);
		margin: 0;
		max-width: 100%;
	}

	.sidebar__about {
		font-family: var(--font-sidebar);
		font-weight: 400;
		font-size: 14px;
		line-height: 22px;
		color: var(--sidebar-text);
		margin: 0;
		max-width: 100%;
	}

	.sidebar__divider {
		width: 100%;
		max-width: 300px;
		height: 1px;
		margin: 0;
		border: none;
		background: var(--sidebar-divider);
	}

	.sidebar__nav,
	.sidebar__connect {
		display: flex;
		flex-direction: column;
		gap: clamp(8px, 1.5vh, 16px);
	}

	.sidebar__nav a,
	.sidebar__connect a {
		font-family: var(--font-sidebar);
		font-weight: 500;
		font-size: 14px;
		line-height: 24px;
		color: var(--sidebar-nav);
		text-decoration: none;
	}

	.sidebar__nav a:hover,
	.sidebar__connect a:hover {
		text-decoration: underline;
	}

	/* Content area — takes remaining space, independent scrollbox */
	.content {
		position: relative;
		flex: 1;
		min-width: 0;
		min-height: 0;
		background: var(--content-bg);
		border-radius: var(--radius-container);
		padding: clamp(12px, 2vw, 24px);
		overflow-y: auto;
	}

	/* Minimal dark scrollbar for content area */
	.content::-webkit-scrollbar {
		width: 6px;
	}

	.content::-webkit-scrollbar-track {
		background: rgba(0, 0, 0, 0.2);
		border-radius: 3px;
	}

	.content::-webkit-scrollbar-thumb {
		background: rgba(0, 0, 0, 0.4);
		border-radius: 3px;
	}

	.content::-webkit-scrollbar-thumb:hover {
		background: rgba(0, 0, 0, 0.5);
	}

	.content__inner {
		position: relative;
		z-index: 1;
		padding: 0;
	}

	/* Footer */
	.footer {
		flex-shrink: 0;
		padding: 50px 50px 40px;
		font-family: var(--font-body);
		font-weight: 400;
		font-size: 15px;
		line-height: 1.6;
		color: rgba(0, 0, 0, 0.4);
	}

	/* ---------- Mobile (<640px) — page scroll, all sidebar content visible ---------- */
	@media (max-width: 640px) {
		.base-layout {
			height: auto;
			min-height: 100vh;
			overflow: visible;
			padding: 0 16px;
		}

		.base-layout__main {
			flex: 1 1 auto;
			height: auto;
			flex-direction: column;
			padding-top: 24px;
			min-height: 0;
		}

		.sidebar {
			flex: none;
			min-width: 0;
			max-width: none;
			width: 100%;
			flex-direction: column;
			align-items: stretch;
			padding: 16px;
			overflow: visible;
		}

		.sidebar__header {
			display: block;
		}

		.sidebar__menu-btn {
			display: none;
		}

		.sidebar__tagline {
			font-size: 18px;
			max-width: 100%;
		}

		/* Show all sidebar content: about, dividers, nav, connect */
		.sidebar__about {
			display: block;
		}

		.sidebar__divider {
			display: block;
			width: 100%;
		}

		.sidebar__nav {
			display: flex;
			flex-direction: column;
			gap: 16px;
			padding-top: 0;
			border-top: none;
		}

		.sidebar__connect {
			display: flex;
			flex-direction: column;
			gap: 20px;
		}

		/* Content area: full width, min-height, normal page scroll (no internal scrollbox) */
		.content {
			width: 100%;
			max-width: none;
			min-height: 60vh;
			flex: 1 1 auto;
			overflow: visible;
		}

		.content__inner {
			padding: 24px;
		}

		.footer {
			padding: 24px 16px 32px;
		}
	}

	/* Article titles scale (used by content inside slot) */
	@media (max-width: 640px) {
		.content :global(h1),
		.content :global(.article-title) {
			font-size: 32px;
		}
	}
</style>
